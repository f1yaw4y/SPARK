# SPARK Mesh Router Configuration
# Copy to /etc/spark/config.toml and customize

# Node name (optional, for display only)
node_name = "spark-node-1"

# Logging
log_level = "INFO"  # DEBUG, INFO, WARNING, ERROR
# log_file = "/var/log/spark/sparkd.log"  # Uncomment to log to file

# Radio Configuration
[radio]
enabled = true
type = "lora_sx1262"  # lora_sx1262, loopback

# Frequency in Hz
# Common LoRa frequencies:
#   US: 915000000 (915 MHz)
#   EU: 868000000 (868 MHz)
#   AS: 923000000 (923 MHz)
frequency = 915000000

# Transmit power in dBm (range: -10 to 22)
# Higher power = longer range but more battery usage
tx_power = 17

# LoRa spreading factor (6-12)
# Higher SF = longer range, slower speed
# SF7: ~5.5 kbps, SF12: ~0.3 kbps
spreading_factor = 9

# Bandwidth in Hz
# Options: 7800, 15600, 31250, 62500, 125000, 250000, 500000
# Lower bandwidth = longer range, slower speed
bandwidth = 125000

# Coding rate (5-8 for 4/5 to 4/8)
# Higher = better error correction, slower speed
coding_rate = 5

# Mesh Networking Configuration
[mesh]
# Beacon interval in seconds
beacon_interval = 30

# Peer timeout in seconds (mark stale after this)
peer_timeout = 300

# Region recalculation interval in seconds
region_recalc_interval = 120

# Maximum peers to track
max_peers = 100

# Onion Routing Configuration
[onion]
# Default TTL for packets
default_ttl = 64

# Minimum nodes to form a region
min_region_size = 3

# Connectivity density threshold for sub-mesh detection (0.0-1.0)
density_threshold = 0.6

# Gateway detection threshold
gateway_threshold = 0.3

# Region cache TTL in seconds
region_cache_ttl = 300

# Storage Configuration
[storage]
# Data directory (keys, databases)
data_dir = "/var/lib/spark"

# Message retention in seconds (default: 7 days)
message_retention = 604800

# Deduplication cache TTL in seconds
dedup_cache_ttl = 300

# Maximum deduplication cache entries
dedup_cache_size = 10000

# Security Configuration
[security]
# Key rotation period in days (0 = disabled)
# WARNING: Enabling key rotation requires coordination with peers
key_rotation_days = 0
